# yaml-language-server: $schema=https://raw.githubusercontent.com/flatpak/flatpak-builder/main/data/flatpak-manifest.schema.json

---
  app-id: lol.janjic.Splitcat
  runtime: org.freedesktop.Platform
  runtime-version: "24.08"
  sdk: org.freedesktop.Sdk
  command: splitcat
  separate-locales: false
  finish-args:
    - --share=ipc
    - --socket=fallback-x11
    - --socket=wayland
    - --device=dri
    - --filesystem=host
    - --filesystem=home
  modules:
    - name: Splitcat
      buildsystem: simple
      build-commands:
        - mkdir -p ${FLATPAK_DEST}/splitcat ${FLATPAK_DEST}/bin
        - mv data ${FLATPAK_DEST}/splitcat
        - mv lib ${FLATPAK_DEST}/splitcat
        - install -Dm755 splitcat ${FLATPAK_DEST}/splitcat/splitcat
        - ln -s ${FLATPAK_DEST}/splitcat/splitcat ${FLATPAK_DEST}/bin/splitcat
        - install -Dm644 $FLATPAK_ID.png -t $FLATPAK_DEST/share/icons/hicolor/256x256/apps/
        - install -Dm644 $FLATPAK_ID.desktop -t $FLATPAK_DEST/share/applications/
        - install -Dm644 $FLATPAK_ID.appdata.xml -t $FLATPAK_DEST/share/metainfo
      sources:
        - type: archive
          url: https://github.com/vogonwann/splitcat/releases/download/v0.1.12/splitcat-linux-x64.tar.gz
          strip-components: 0
          sha256: 431a5cf1e967470379d735d210aae6c408223765152c5631f44ec5faf81169b6
          only-arches:
            - x86_64
        - type: archive
          url: https://github.com/vogonwann/splitcat/releases/download/v0.1.12/splitcat-linux-arm64.tar.gz
          strip-components: 0
          sha256: 052afe52a221ba04f5e1f574d8d578fb2ef8cb2a53841aa9e3c383cf779b7d5a
          only-arches:
              - aarch64
